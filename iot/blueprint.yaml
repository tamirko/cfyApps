tosca_definitions_version: cloudify_dsl_1_2
imports:
  - 'http://www.getcloudify.org/spec/cloudify/3.3/types.yaml'
  - 'http://getcloudify.org.s3.amazonaws.com/spec/puppet-plugin/1.3/plugin.yaml'
  - 'http://www.getcloudify.org/spec/openstack-plugin/1.3/plugin.yaml'
  - 'http://getcloudify.org.s3.amazonaws.com/spec/host-pool-plugin/1.3/plugin.yaml'
  - 'http://getcloudify.org.s3.amazonaws.com/spec/fabric-plugin/1.3/plugin.yaml'
  - 'http://getcloudify.org.s3.amazonaws.com/spec/docker-plugin/1.3/plugin.yaml'
  - 'http://www.getcloudify.org/spec/diamond-plugin/1.3/plugin.yaml'
  - 'http://getcloudify.org.s3.amazonaws.com/spec/chef-plugin/1.3/plugin.yaml'
  - 'http://getcloudify.org.s3.amazonaws.com/spec/aws-plugin/1.3/plugin.yaml'
plugins: {}
node_types:
  APARTMENT:
    derived_from: cloudify.nodes.Compute
    properties:
      os_family:
        description: |
          Property specifying what type of operating system family
          this compute node will run.
        default: linux
      agent_config:
        type: cloudify.datatypes.AgentConfig
        default: '{"install_method":"none","port":22}'
        description: ccccc
      cloudify_agent:
        default: '{}'
    interfaces: {}
  ROOM:
    derived_from: cloudify.nodes.Root
    properties: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        start:
          implementation: scripts/startRoom.sh
  APPLIANCE:
    derived_from: cloudify.nodes.Root
    properties: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        start:
          implementation: scripts/startAppliance.sh
node_templates:
  LIVING_ROOM:
    type: ROOM
    instances:
      deploy: 1
    relationships:
      - type: cloudify.relationships.contained_in
        target: APARTMENT
  KITCHEN:
    type: ROOM
    instances:
      deploy: 1
    relationships:
      - type: cloudify.relationships.contained_in
        target: APARTMENT
  TV_LIVING_ROOM:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.connected_to
        target: ROUTER
      - type: cloudify.relationships.contained_in
        target: LIVING_ROOM
    instances:
      deploy: 1
  FRIDGE:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.contained_in
        target: KITCHEN
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.connected_to
        target: ROUTER
    instances:
      deploy: 1
  APARTMENT:
    type: APARTMENT
    instances:
      deploy: 1
    properties:
      agent_config: '{"install_method": none,"port":22}'
    relationships: []
  LAPTOP_LIVING_ROOM:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.contained_in
        target: LIVING_ROOM
      - type: cloudify.relationships.connected_to
        target: ROUTER
  ELECTRICITY:
    type: APARTMENT
    instances:
      deploy: 1
    relationships: []
  BEDROOM:
    type: ROOM
    instances:
      deploy: 1
    relationships:
      - type: cloudify.relationships.contained_in
        target: APARTMENT
  TV_BEDROOM:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.contained_in
        target: BEDROOM
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.connected_to
        target: ROUTER
    instances:
      deploy: 1
  AIRCONDITION_BEDROOM:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.contained_in
        target: BEDROOM
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.connected_to
        target: ROUTER
    instances:
      deploy: 1
  AIRCONDITION_LIVING_ROOM:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.connected_to
        target: ROUTER
      - type: cloudify.relationships.contained_in
        target: LIVING_ROOM
    instances:
      deploy: 1
  ROUTER:
    type: APPLIANCE
    relationships:
      - type: cloudify.relationships.contained_in
        target: HALL
      - type: cloudify.relationships.connected_to
        target: ELECTRICITY
      - type: cloudify.relationships.connected_to
        target: THE_INTERNET
    instances:
      deploy: 1
  HALL:
    type: ROOM
    instances:
      deploy: 1
    relationships:
      - type: cloudify.relationships.contained_in
        target: APARTMENT
  THE_INTERNET:
    type: APARTMENT
    instances:
      deploy: 1
relationships: {}
