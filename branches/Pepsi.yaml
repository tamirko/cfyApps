tosca_definitions_version: cloudify_dsl_1_3
imports:
  - 'http://www.getcloudify.org/spec/cloudify/3.4/types.yaml'

inputs:
  Company: {}
  antivirus: {}

  TelAviv_lte_value : 
    default: ""
  TelAviv_Serial_id : 
    default: ""
  TelAviv_VDSL_value : 
    default: ""
  TelAviv_xxx_value : 
    default: ""
  Jerusalem_lte_value : 
    default: ""
  Jerusalem_Serial_id : 
    default: ""
  Jerusalem_VDSL_value : 
    default: ""
  Jerusalem_xxx_value : 
    default: ""
  Haifa_lte_value : 
    default: ""
  Haifa_Serial_id : 
    default: ""
  Haifa_VDSL_value : 
    default: ""
  Haifa_xxx_value : 
    default: ""
  Hertseliya_lte_value : 
    default: ""
  Hertseliya_Serial_id : 
    default: ""
  Hertseliya_VDSL_value : 
    default: ""
  Hertseliya_xxx_value : 
    default: ""
node_types:
  CPE_type:
    derived_from: cloudify.nodes.Root
    properties:
      LTE:
        required: false
      Serial:
        required: false
      VDSL:
        required: false
      METRO:
        required: false
  TerminationPoint_type:
    derived_from: cloudify.nodes.Root
  JunctionPoint_type:
    derived_from: cloudify.nodes.Root
  Branch_type:
    derived_from: cloudify.nodes.Root
    properties:
      company:
        required: true
        type: string
  VNF_type:
    derived_from: cloudify.nodes.Root
    properties:
      anti_virus:
        required: false

node_templates:
  TerminationPoint:
    type: TerminationPoint_type
    relationships:
      - type: cloudify.relationships.connected_to
        target: Fortigate

  Fortigate:
    type: VNF_type
    properties:
      anti_virus: { get_input: antivirus }

  TelAviv:
    type: CPE_type
    properties:
      LTE: { get_input: TelAviv_lte_value  }
      Serial: { get_input: TelAviv_Serial_id  }
      VDSL: { get_input: TelAviv_VDSL_value  }
      METRO: { get_input: TelAviv_xxx_value  }
    relationships:
      - type: cloudify.relationships.connected_to
        target: TerminationPoint
  Jerusalem:
    type: CPE_type
    properties:
      LTE: { get_input: Jerusalem_lte_value  }
      Serial: { get_input: Jerusalem_Serial_id  }
      VDSL: { get_input: Jerusalem_VDSL_value  }
      METRO: { get_input: Jerusalem_xxx_value  }
    relationships:
      - type: cloudify.relationships.connected_to
        target: TerminationPoint
  Haifa:
    type: CPE_type
    properties:
      LTE: { get_input: Haifa_lte_value  }
      Serial: { get_input: Haifa_Serial_id  }
      VDSL: { get_input: Haifa_VDSL_value  }
      METRO: { get_input: Haifa_xxx_value  }
    relationships:
      - type: cloudify.relationships.connected_to
        target: TerminationPoint
  Hertseliya:
    type: CPE_type
    properties:
      LTE: { get_input: Hertseliya_lte_value  }
      Serial: { get_input: Hertseliya_Serial_id  }
      VDSL: { get_input: Hertseliya_VDSL_value  }
      METRO: { get_input: Hertseliya_xxx_value  }
    relationships:
      - type: cloudify.relationships.connected_to
        target: TerminationPoint
groups: {}
